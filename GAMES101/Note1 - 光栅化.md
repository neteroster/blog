# 光栅化

## 深度缓存（Z-Buffer）

主要思想：光栅化过程中，对于每一个需要光栅化的三角形的每一个采样点，维护一个深度缓存（`z-buffer`），里面装的是每个采样点最浅深度。

遍历任一三角形的包围框的每一个采样点的过程中，如果该采样点在三角形内，且深度比原本 `z-buffer` 中的要浅，那么把最后生成图像的此位置的像素点颜色设置为这个三角形在这点的颜色，并更新深度缓存值，否则什么都不做。

主要过程：

先初始化 `z-buffer` 全为 $\infty$.

光栅化过程中：

```
for (each triange T)
    for (each sample(x,y,z) in T)
        if (z < zbuffer[x,y])
            framebuffer[x,y]=rgb
            zbuffer[x,y]=z;
        else
        ;
```

## 抗锯齿（MSAA）

主要思想：超采样，取平均。

特别注意：对于每个三角形中的每个采样点（而不是最终的每个像素）都要维护 `z-buffer`。

